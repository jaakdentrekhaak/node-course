{"version":3,"sources":["../../../../src/controllers/users/handlers/create.handler.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { UserStore } from \"./user.store.js\";\nimport { plainToInstance } from \"class-transformer\";\nimport { UserBody } from \"../../../contracts/user.body.js\";\nimport { validate } from \"class-validator\";\nimport { UserView } from \"../../../contracts/user.view.js\";\n\nexport const create = async (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  const transformed = plainToInstance(UserBody, req.body);\n  const validationErrors = await validate(transformed, {\n    skipMissingProperties: false,\n    whitelist: true,\n    forbidNonWhitelisted: true,\n  });\n\n  if (validationErrors.length) {\n    return next(validationErrors);\n  }\n  const user = UserStore.add(transformed);\n\n  res.json(plainToInstance(UserView, user));\n};\n"],"names":["UserStore","plainToInstance","UserBody","validate","UserView","create","req","res","next","transformed","body","validationErrors","skipMissingProperties","whitelist","forbidNonWhitelisted","length","user","add","json"],"mappings":"AACA,SAASA,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,QAAQ,QAAQ,kCAAkC;AAC3D,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,QAAQ,QAAQ,kCAAkC;AAE3D,OAAO,MAAMC,SAAS,OACpBC,KACAC,KACAC;IAEA,MAAMC,cAAcR,gBAAgBC,UAAUI,IAAII,IAAI;IACtD,MAAMC,mBAAmB,MAAMR,SAASM,aAAa;QACnDG,uBAAuB;QACvBC,WAAW;QACXC,sBAAsB;IACxB;IAEA,IAAIH,iBAAiBI,MAAM,EAAE;QAC3B,OAAOP,KAAKG;IACd;IACA,MAAMK,OAAOhB,UAAUiB,GAAG,CAACR;IAE3BF,IAAIW,IAAI,CAACjB,gBAAgBG,UAAUY;AACrC,EAAE"}